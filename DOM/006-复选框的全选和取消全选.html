<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>表单验证</title>
</head>
<body>
	<script type="text/javascript">
		window.onload = function(){
			var firstChk = document.getElementById("firstChk");
			var aihaos = document.getElementsByName("aihao");
			firstChk.onclick = function(){
				// 获取第一个复选框的选中状态
				// alert(firstChk.checked);
				
				 /*if (firstChk.checked) {
				 	// 全选
				 	for (var i = 0; i < aihaos.length; i++) {
				 		aihaos[i].checked = true;
				 	}
				 } else {
				 	// 取消全选
					for (var i = 0; i < aihaos.length; i++) {
				 		aihaos[i].checked = false;
				 	}
				 }*/

				for (var i = 0; i < aihaos.length; i++) {
				 	aihaos[i].checked = firstChk.checked;
				}
			}

			var all = aihaos.length;
			for (var i = 0; i < aihaos.length; i++) {
				aihaos[i].onclick = function(){  
					var count = 0;
					for (var i = 0; i < aihaos.length; i++) {
						if (aihaos[i].checked) {
						count++;
						}
					}
					/*if (all == count) {
						firstChk.checked = true;
					} else {
						firstChk.checked = false;
					}*/

					firstChk.checked = (all == count);
				}
			}
		}
	</script>

	<input type="checkbox" id="firstChk" /><br>
	<input type="checkbox" name="aihao" value="smoke"/>抽烟<br>
	<input type="checkbox" name="aihao" value="drink"/>喝酒<br>
	<input type="checkbox" name="aihao" value="tt "/>烫头<br>

</body>
</html>